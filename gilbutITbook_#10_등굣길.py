# ì œì¶œ ì½”ë“œ
def solution(m, n, puddles):
    MOD = 1000000007
    
    dp = [[0 for _ in range(m)] for _ in range(n)]
    puddles_set = {(y-1, x-1) for x, y in puddles}  # puddlesë¥¼ ì¢Œí‘œ ë³´ì • í›„ setìœ¼ë¡œ ë³€ê²½

    # ì´ˆê¸°í™” (ë¬¼ì´ ìˆìœ¼ë©´ ì´í›„ ê²½ë¡œëŠ” ëª¨ë‘ 0)
    for r in range(n):
        if (r, 0) in puddles_set:
            break
        dp[r][0] = 1

    for c in range(m):
        if (0, c) in puddles_set:
            break
        dp[0][c] = 1

    # DP ì§„í–‰
    for r in range(1, n):
        for c in range(1, m):
            if (r, c) in puddles_set: 
                dp[r][c] = 0
            else:
                dp[r][c] = (dp[r-1][c] + dp[r][c-1]) % MOD

    return dp[n-1][m-1]

'''
ì „ì˜ í‹€ë¦° ì½”ë“œ í”¼ë“œë°±
ğŸš© ë¬¸ì œì  ë¶„ì„:
â‘  ì›…ë©ì´ ì²˜ë¦¬ ë°©ì‹ ì˜¤ë¥˜
í˜„ì¬ puddles ë°°ì—´ì˜ ì¢Œí‘œëŠ” [x, y] í˜•íƒœë¡œ ì£¼ì–´ì§‘ë‹ˆë‹¤. í•˜ì§€ë§Œ ì‘ì„±í•˜ì‹  ì½”ë“œì—ì„œ ì¢Œí‘œë¥¼ [r+1, c+1]ë¡œ ë¹„êµí•˜ê³  ìˆìŠµë‹ˆë‹¤.

puddlesëŠ” (x, y) í˜•ì‹ì´ë©°, ì‹¤ì œ DPì—ì„œëŠ” (r, c) í˜•íƒœë¡œ ì“°ë¯€ë¡œ, ë¹„êµ ì‹œ ì¸ë±ìŠ¤ê°€ ì„œë¡œ ë°”ë€Œì–´ì•¼ í•©ë‹ˆë‹¤.
ì •í™•íˆëŠ” [c+1, r+1]ë¡œ ë¹„êµí•´ì•¼ í•©ë‹ˆë‹¤.
ë˜í•œ í˜„ì¬ëŠ” ë°˜ë³µë¬¸ì„ ëŒ ë•Œë§ˆë‹¤ puddles ë¦¬ìŠ¤íŠ¸ì—ì„œ ì°¾ëŠ” ë°©ì‹(in)ì„ ì“°ê³  ìˆì–´ ë¹„íš¨ìœ¨ì ì´ë¯€ë¡œ, setìœ¼ë¡œ ë°”ê¾¸ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤.
â‘¡ ì´ˆê¸°í™” ê³¼ì •ì˜ ë¬¸ì œ
ë¬¼ì´ ìˆëŠ” ìœ„ì¹˜ë¥¼ ì „í˜€ ê³ ë ¤í•˜ì§€ ì•Šê³  ì²˜ìŒë¶€í„° dp[0][c] = 1 ë° dp[r][0] = 1ë¡œ ì´ˆê¸°í™”í•´ë²„ë¦½ë‹ˆë‹¤.

ì‹œì‘ì ì—ì„œ ì˜¤ë¥¸ìª½ ë˜ëŠ” ì•„ë˜ìª½ìœ¼ë¡œë§Œ ê°ˆ ë•Œ, ì¤‘ê°„ì— ì›…ë©ì´ê°€ ìˆìœ¼ë©´ ì´í›„ ëª¨ë“  ê²½ë¡œëŠ” ë§‰íˆê¸° ë•Œë¬¸ì—, ì´ˆê¸°í™” ê³¼ì •ì—ì„œë„ ì›…ë©ì´ë¥¼ ë§Œë‚˜ëŠ” ìˆœê°„ ì´í›„ëŠ” ëª¨ë‘ 0ì´ ë˜ì–´ì•¼ í•©ë‹ˆë‹¤.'
'''

'''
í‹€ë¦° ì½”ë“œ
def solution(m, n, puddles):
    # ë©”ëª¨ì´ì œì´ì…˜ìœ¼ë¡œ í’ˆ
    dp = [[-1 for _ in range(n)] for _ in range(m)]
    # dpì˜ 0ë²ˆì§¸ í–‰ê³¼ ì—´ì— 1ì„ ì €ì¥í•œë‹¤.
    for r in range(m):
        dp[r][0] = 1
    for c in range(n):
        dp[0][c] = 1
    # (1, 1) ìœ„ì¹˜ì—ì„œ ì‹œì‘
    for r in range(1, m):
        for c in range(1, n):
            if [r+1, c+1] in puddles: # ë¬¼ì›…ë©ì´ ì²˜ë¦¬
                dp[r][c] = 0
            else:
                dp[r][c] = dp[r-1][c] + dp[r][c-1]
    return dp[m-1][n-1]
'''

'''
ì¢€ ë” í¸ë¦¬í•œ ì½”ë“œ (ì¸ë±ì‹± ì‚´í´ë³´ê¸°)
def solution(m, n, puddles):
    MOD = 1000000007
    dp = [[0] * (m + 1) for _ in range(n + 1)]
    
    # ë¬¼ì— ì ê¸´ ì§€ì—­ í‘œì‹œ
    puddles_set = {(y, x) for x, y in puddles}

    dp[1][1] = 1
    for y in range(1, n + 1):
        for x in range(1, m + 1):
            if (y, x) in puddles_set:
                dp[y][x] = 0  # ë¬¼ ì›…ë©ì´
            else:
                if y == 1 and x == 1:
                    continue  # ì‹œì‘ì ì€ ì´ë¯¸ 1ë¡œ ì´ˆê¸°í™”ë¨
                dp[y][x] = (dp[y - 1][x] + dp[y][x - 1]) % MOD
    
    return dp[n][m]
'''